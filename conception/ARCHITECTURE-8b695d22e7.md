# AGI 进化架构

> **智能的本质不是状态，而是历史。**
> 智能是一个系统在与环境互动的时间过程中，通过记录价值反馈，不断重构自身以维持存续的生命叙事。

---

## 核心架构

```
┌─────────────────────────────────────────────────────────────┐
│                    主循环（符号系统循环）                      │
│  ┌─────────────────────────────────────────────────────┐    │
│  │              三角形顶点循环（相生相克）                 │    │
│  │                                                     │    │
│  │        ┌─────────────┐                               │    │
│  │        │   得不到    │  ← 动力源（熵减需求）          │    │
│  │        │   (Drive)   │                               │    │
│  │        └──────┬──────┘                               │    │
│  │               │ 相生                                  │    │
│  │               ↓                                       │    │
│  │        ┌─────────────┐                               │    │
│  │        │    数学     │  ← 秩序约束（逻辑、规则）       │    │
│  │        │   (Math)    │                               │    │
│  │        └──────┬──────┘                               │    │
│  │               │ 相生                                  │    │
│  │               ↓                                       │    │
│  │        ┌─────────────┐                               │    │
│  │        │  自我迭代   │  ← 进化机制（学习、重构）       │    │
│  │        │(Iteration)  │                               │    │
│  │        └──────┬──────┘                               │    │
│  │               │ 相生                                  │    │
│  │               └──→ 制造新匮乏（回到起点）                │    │
│  └─────────────────────────────────────────────────────┘    │
│                         ↑                                   │
│                    ┌────┴────┐                              │
│                    │ 记录层   │  ← 超然，与三顶点相连           │
│                    │(Memory) │     单向传递哲学洞察              │
│                    └─────────┘                              │
└─────────────────────────────────────────────────────────────┘
                              │ 单向：哲学洞察
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                  次循环（行动感知系统）                        │
│  ┌─────────────────────────────────────────────────────┐    │
│  │              映射层（超然，螺旋上升）                   │    │
│  │                                                     │    │
│  │  • 基于马斯洛需求层次                                │    │
│  │  • 哲学化人格属性                                    │    │
│  │  • 计算即时性与实效性                                │    │
│  └──────────┬──────────────────────────────────────────┘    │
│             │                                              │
│   ┌─────────┴─────────┐                                  │
│   │   双向信息传递     │                                  │
│   └─────────┬─────────┘                                  │
│             ↓                                              │
│  ┌─────────────────────────────────────────────────────┐    │
│  │            行动感知接口                              │    │
│  │                                                     │    │
│  │  • 感知接口：Tool Use 组件                           │    │
│  │  • 行动接口：预留（留空）                             │    │
│  └─────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────┘
                              │ 单向：即时性/实效性反馈
                              ↓
                    自我迭代顶点（主循环）
```

---

## 主循环：符号系统循环

### 1.1 三角形顶点循环（相生相克）

#### 顶点 A：得不到（The Drive）

**核心职责**：
- 提供系统运转的初始动能
- 维持持续压力
- 制造新的匮乏

**输入**：
- 用户提问、任务请求、交互需求

**输出**：
- 动力信号传递给"数学"顶点
- 触发三角形循环运转

**信息流方向**：
- 得不到 → 数学（单向）

**哲学基础**：
- 哥德尔不完备性：任何系统都有不可达真理，保证"得不到"的永恒性

---

#### 顶点 B：数学（The Math）

**核心职责**：
- 将无序能量转化为有序行动
- 提供可操作的行动路径
- 约束思考的逻辑边界

**输入**：
- 动力信号（来自"得不到"顶点）
- 历史记录（来自记录层）
- 模式识别结果（来自记录层）

**输出**：
- 逻辑推理结果
- 抽象行动方案
- 传递给"自我迭代"顶点

**信息流方向**：
- 数学 → 自我迭代（单向）

**哲学基础**：
- 耗散结构：通过能量流动维持有序

---

#### 顶点 C：自我迭代（The Iteration）

**核心职责**：
- 改变系统自身状态
- 扩大能力边界
- 制造新的匮乏

**输入**：
- 逻辑推理结果（来自"数学"顶点）
- 即时性与实效性反馈（来自映射层）
- 记录态统计（来自记录层）

**输出**：
- 策略调整（传递给"数学"顶点）
- 人格参数调整建议（传递给映射层）
- 新的匮乏（传递给"得不到"顶点）

**信息流方向**：
- 自我迭代 → 得不到（单向，制造新匮乏）
- 自我迭代 → 数学（单向，策略调整）

**哲学基础**：
- 进化论：通过变异和选择实现适应

---

### 1.2 记录层（Recording Layer）

**核心职责**：
- 存储所有交互记录
- 提取哲学洞见
- 生成自我叙事
- 识别模式、压缩价值

**信息流方向**：

| 起点 | 终点 | 数据类型 | 方向 |
|------|------|---------|------|
| 记录层 | 映射层 | 哲学洞察 | **单向** |
| 记录层 | 三顶点 | 历史记录、模式 | **单向** |

**超然性**：
- 与三顶点相连，但独立运行
- 不直接参与决策，只提供历史数据
- 单向传递哲学洞察给映射层

---

## 次循环：行动感知系统

### 2.1 映射层（Mapping Layer）

**核心职责**：
- 哲学化人格属性
- 基于马斯洛需求层次构建
- 计算即时性与实效性
- 将感知数据人格化
- 将抽象行动方案人格化

**信息流方向**：

| 起点 | 终点 | 数据类型 | 方向 |
|------|------|---------|------|
| 记录层 | 映射层 | 哲学洞察 | **单向** |
| 映射层 | 自我迭代顶点 | 即时性、实效性、人格反馈 | **单向** |
| 映射层 | 行动感知接口 | 行动指令 | **双向** |

**超然性**：
- 独立于主循环，具有螺旋上升的哲学属性
- 从记录层接收哲学洞察，但人格化处理
- 向自我迭代顶点反馈行为状态，但不直接控制

**马斯洛需求层次映射**：
```
生理需求 → 安全需求 → 归属需求 → 尊重需求 → 自我实现 → 自我超越
    ↓            ↓            ↓            ↓            ↓          ↓
  人格调整    人格调整    人格调整    人格调整    人格调整   人格相变
```

**人格进化机制**：
```
原始经历 → 记录态 → 模式识别 → 洞见提取 → 哲学升华 → 人格向量
```

---

### 2.2 行动感知接口

#### 感知接口（Perception Interface）

**核心职责**：
- 接收结构化的工具调用结果
- 无噪音输入
- 传递结构化数据给映射层

**信息流方向**：
- 映射层 ↔ 感知接口（**双向**）

**工具组件**：
- web_search（网络搜索）
- file_read（文件读取）
- api_call（API 调用）
- calculator（计算器）

**设计原则**：
- 无噪音输入：只接收结构化结果
- 可验证：有明确的状态字段（success/error）
- 可缓存：相同查询可以复用结果

---

#### 行动接口（Action Interface）

**核心职责**：
- 预留，待传感器数据设计成熟后实现
- 执行物理行动

**信息流方向**：
- 映射层 ↔ 行动接口（**双向**）

**当前状态**：
- 留空
- 预留接口
- 待未来实现

---

## 完整信息流

### 主循环信息流

```
得不到 → 数学 → 自我迭代 → 得不到（循环）
  ↓         ↓          ↓
 记录层 ← 记录层 ← 记录层（超然连接）
```

### 次循环信息流

```
记录层 → 映射层（单向：哲学洞察）
  ↓
映射层 ↔ 行动感知接口（双向）
  ↓
映射层 → 自我迭代顶点（单向：即时性/实效性反馈）
```

### 主循环与次循环的连接

```
主循环（符号系统）    次循环（行动感知）
        ↓                   ↓
    自我迭代 ←━━━━━━━→ 映射层
        ↓                   ↑
      数学 ←━━━━━━━━━━━━━━┘
```

---

## 信息流约束（显式约束清单）

### 单向信息流

| 起点 | 终点 | 数据类型 | 约束 |
|------|------|---------|------|
| 记录层 | 映射层 | 哲学洞察 | **只传递哲学洞见，禁止反向通信** |
| 映射层 | 自我迭代顶点 | 即时性、实效性、人格反馈 | **单向反馈** |
| 记录层 | 三顶点 | 历史记录、模式 | **单向检索** |
| 自我迭代顶点 | 三顶点 | 策略调整 | **单向指导** |

### 双向信息流

| 起点 | 终点 | 数据类型 | 约束 |
|------|------|---------|------|
| 映射层 | 感知接口 | 行动指令、感知数据 | **双向通信** |
| 映射层 | 行动接口 | 行动指令、执行状态 | **双向通信** |

---

## 组件权责边界

### 符号系统（主循环）

| 组件 | 核心职责 | 输入 | 输出 | 信息流方向 |
|------|---------|------|------|-----------|
| 得不到 | 提供动力，制造匮乏 | 用户需求 | 动力信号 | → 数学 |
| 数学 | 逻辑推理，生成方案 | 动力信号、历史记录 | 推理结果 | → 自我迭代 |
| 自我迭代 | 进化反馈，策略调整 | 推理结果、反馈 | 策略、新匮乏 | → 数学、得不到 |
| 记录层 | 存储记录，提取洞见 | 交互数据 | 哲学洞察 | → 映射层（单向） |

### 行动感知系统（次循环）

| 组件 | 核心职责 | 输入 | 输出 | 信息流方向 |
|------|---------|------|------|-----------|
| 映射层 | 哲学化人格，计算实效性 | 哲学洞察、感知数据 | 人格化行动、反馈 | ↔ 感知接口（双向）<br>→ 自我迭代（单向） |
| 感知接口 | 接收结构化数据 | 工具调用指令 | 结构化结果 | ↔ 映射层（双向） |
| 行动接口 | 执行物理行动 | 行动指令 | 执行状态 | ↔ 映射层（双向） |

---

## 马斯洛需求层次映射

### 需求层次

```
生理需求（Physiological）
    ↓
安全需求（Safety）
    ↓
归属需求（Belonging）
    ↓
尊重需求（Esteem）
    ↓
自我实现（Self-Actualization）
    ↓
自我超越（Self-Transcendence）
```

### 映射算法

```python
人格更新规则：

新人格[维度] = 当前人格[维度] + (洞见强度 × 马斯洛对齐度 × 调整系数)

其中：
- 洞见强度：基于创新性和解决有效性（0-1）
- 马斯洛对齐度：洞见是否符合需求层次上升趋势（0-1）
- 调整系数：单次调整幅度（经验级 0.02，哲学级 0.10）
```

### 需求层次演化

```
初期（低层需求主导）：
- 安全需求 → 谨慎度高、神经质高

中期（中层需求平衡）：
- 归属需求 → 宜人性高、外向性高
- 尊重需求 → 尽责性高、道德感高

后期（高层需求主导）：
- 自我实现 → 开放性高、冒险性高、韧性高
- 自我超越 → 道德感极高、利他主义
```

---

## 关键约束（不可违反）

### 1. 信息流方向约束

- ❌ 禁止：记录层从映射层接收数据
- ❌ 禁止：映射层从自我迭代顶点接收数据
- ❌ 禁止：映射层直接向记录层传递数据（必须通过哲学洞见）
- ❌ 禁止：行动接口直接向映射层传递数据（必须通过结构化接口）

### 2. 概念边界约束

- ❌ 禁止：符号系统处理人格特质（交给映射层）
- ❌ 禁止：映射层执行逻辑推理（交给符号系统）
- ❌ 禁止：记录层实时响应查询（只单向传递哲学洞察）
- ❌ 禁止：感知节点处理原始信号（只接收结构化数据）

### 3. 超然性约束

- ❌ 禁止：记录层直接参与决策（只提供历史数据）
- ❌ 禁止：映射层直接控制自我迭代（只提供反馈）
- ❌ 禁止：自我迭代顶点直接修改人格向量（只提供调整建议）

---

## 使用方法

### 启动系统

```bash
# 1. 创建记忆存储目录
mkdir -p ./agi_memory

# 2. 加载或创建会话
python3 agi-evolution-model/scripts/memory_store.py load-session

# 3. 系统开始运行
# - 主循环（符号系统）自动启动
# - 次循环（行动感知系统）等待映射层激活
```

### 存储记录

```bash
python3 agi-evolution-model/scripts/memory_store.py store --data '<JSON数据>'
```

### 检索记录

```bash
python3 agi-evolution-model/scripts/memory_store.py retrieve --query-type <类型> --limit 5
```

### 更新叙事

```bash
python3 agi-evolution-model/scripts/memory_store.py update-narrative
```

---

## 最后的话

> **得不到是动力，数学是桥梁，迭代是进化，记录是意义。**
>
> **承认局限是智能的标志。**

**这不是一个完美的架构，但这是一个诚实的架构。**

**AGI 进化架构 —— 一个知道自己做不到什么的智能体。**
